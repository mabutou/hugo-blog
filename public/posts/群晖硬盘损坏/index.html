<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.79.0" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="Butou Ma" />
  <meta property="og:url" content="https://blog.pp.wtf/posts/%E7%BE%A4%E6%99%96%E7%A1%AC%E7%9B%98%E6%8D%9F%E5%9D%8F/" />
  <link rel="canonical" href="https://blog.pp.wtf/posts/%E7%BE%A4%E6%99%96%E7%A1%AC%E7%9B%98%E6%8D%9F%E5%9D%8F/" /><link rel="preload" href="/js/highlight.pack.js" as="script" /><link rel="alternate" type="application/atom+xml" href="https://blog.pp.wtf/index.xml" title="Mabutou&#39;s Blog">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/blog.pp.wtf\/"
      },
      "articleSection" : "posts",
      "name" : "群晖系统提示硬盘损毁后提取硬盘数据",
      "headline" : "群晖系统提示硬盘损毁后提取硬盘数据",
      "description" : "群晖系统在安装新硬盘时需要进行硬盘的初始化，支持 ext4 或者 btrfs 两种文件系统。（我用的 brtfs）\n群晖在检测到硬盘健康状况不太好时，容易提示硬盘损毁，此时在群晖系统内无法读写硬盘内容了。一般重新格式化或者修复下坏道就能继续正常用。\n此时如果想要先取出其中的文件只能用其他系统。这两种格式都不能直接在 Mac 系统或者 windows 系统里正常读取。\n不过可以用 Linux 系统读取。\n以 Ubuntu 为例：\n使用虚拟机直接装一个 Ubuntu。或者制作 u 盘启动盘，进入 LiveCD 模式启动电脑。\n推荐使用虚拟机\n我用的 Mac 上的 Parallels，VMware 当然也行。\n进入系统后打开终端并以 root 身份（sudo -i）执行以下操作：\n apt-get update apt-get install mdadm lvm2 btrfs-prog mdadm -Asf \u0026amp;\u0026amp; vgchange -ay  然后在文件管理器内就能看到对应的盘，文件数量少的话，直接手动选择复制就行。\n 以上步骤随手一谷歌就能在网上找到，以下才是重点。\n 在文件浏览器里可以直接批量复制，刚开始我是 smb 协议链接到 nas 去，进行远程复制。\n然而会遇到 @开头的文件夹，此时会提示是否跳过，这种文件夹很多，一直点很烦，不点就会卡在那。而且测试后发现，smb 协议速度一般。\n所以我直接先用 Mac 的 Finder 用 afp 协议链接到 nas，在 Ubuntu 终端内用 rsync 复制的，直接排除掉 @开头文件夹，速度也快很多。",
      "inLanguage" : "en-US",
      "author" : "Butou Ma",
      "creator" : "Butou Ma",
      "publisher": "Butou Ma",
      "accountablePerson" : "Butou Ma",
      "copyrightHolder" : "Butou Ma",
      "copyrightYear" : "2019",
      "datePublished": "2019-10-22 19:56:47 \u002b0800 CST",
      "dateModified" : "2019-10-22 19:56:47 \u002b0800 CST",
      "url" : "https:\/\/blog.pp.wtf\/posts\/%E7%BE%A4%E6%99%96%E7%A1%AC%E7%9B%98%E6%8D%9F%E5%9D%8F\/",
      "keywords" : [  ]
  }
</script>
<title>群晖系统提示硬盘损毁后提取硬盘数据 - Mabutou&#39;s Blog</title>
  <meta property="og:title" content="群晖系统提示硬盘损毁后提取硬盘数据 - Mabutou&#39;s Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="群晖系统在安装新硬盘时需要进行硬盘的初始化，支持 ext4 或者 btrfs 两种文件系统。（我用的 brtfs）
群晖在检测到硬盘健康状况不太好时，容易提示硬盘损毁，此时在群晖系统内无法读写硬盘内容了。一般重新格式化或者修复下坏道就能继续正常用。
此时如果想要先取出其中的文件只能用其他系统。这两种格式都不能直接在 Mac 系统或者 windows 系统里正常读取。
不过可以用 Linux 系统读取。
以 Ubuntu 为例：
使用虚拟机直接装一个 Ubuntu。或者制作 u 盘启动盘，进入 LiveCD 模式启动电脑。
推荐使用虚拟机
我用的 Mac 上的 Parallels，VMware 当然也行。
进入系统后打开终端并以 root 身份（sudo -i）执行以下操作：
 apt-get update apt-get install mdadm lvm2 btrfs-prog mdadm -Asf &amp;&amp; vgchange -ay  然后在文件管理器内就能看到对应的盘，文件数量少的话，直接手动选择复制就行。
 以上步骤随手一谷歌就能在网上找到，以下才是重点。
 在文件浏览器里可以直接批量复制，刚开始我是 smb 协议链接到 nas 去，进行远程复制。
然而会遇到 @开头的文件夹，此时会提示是否跳过，这种文件夹很多，一直点很烦，不点就会卡在那。而且测试后发现，smb 协议速度一般。
所以我直接先用 Mac 的 Finder 用 afp 协议链接到 nas，在 Ubuntu 终端内用 rsync 复制的，直接排除掉 @开头文件夹，速度也快很多。" />
  <meta name="description" content="群晖系统在安装新硬盘时需要进行硬盘的初始化，支持 ext4 或者 btrfs 两种文件系统。（我用的 brtfs）
群晖在检测到硬盘健康状况不太好时，容易提示硬盘损毁，此时在群晖系统内无法读写硬盘内容了。一般重新格式化或者修复下坏道就能继续正常用。
此时如果想要先取出其中的文件只能用其他系统。这两种格式都不能直接在 Mac 系统或者 windows 系统里正常读取。
不过可以用 Linux 系统读取。
以 Ubuntu 为例：
使用虚拟机直接装一个 Ubuntu。或者制作 u 盘启动盘，进入 LiveCD 模式启动电脑。
推荐使用虚拟机
我用的 Mac 上的 Parallels，VMware 当然也行。
进入系统后打开终端并以 root 身份（sudo -i）执行以下操作：
 apt-get update apt-get install mdadm lvm2 btrfs-prog mdadm -Asf &amp;&amp; vgchange -ay  然后在文件管理器内就能看到对应的盘，文件数量少的话，直接手动选择复制就行。
 以上步骤随手一谷歌就能在网上找到，以下才是重点。
 在文件浏览器里可以直接批量复制，刚开始我是 smb 协议链接到 nas 去，进行远程复制。
然而会遇到 @开头的文件夹，此时会提示是否跳过，这种文件夹很多，一直点很烦，不点就会卡在那。而且测试后发现，smb 协议速度一般。
所以我直接先用 Mac 的 Finder 用 afp 协议链接到 nas，在 Ubuntu 终端内用 rsync 复制的，直接排除掉 @开头文件夹，速度也快很多。" />
  <meta property="og:locale" content="en-us" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">

  

  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="Mabutou&#39;s Blog">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109814537-1"></script>
</head>

<body>
  <article class="post " id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          <header>
  <div class="signatures site-title">
    <a href="/">Mabutou</a>
  </div>
</header>
<div class="site-footer">
  
  <div class="site-footer-item">
    <a href="https://timeline.butou.ma/" target="_blank">Timeline</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://photo.butou.ma" target="_blank">Photo</a>
  </div>
  
  <div class="site-footer-item">
    <a href="/posts/about-me/" target="_blank">About</a>
  </div>
  
  
</div>

        </div>
        <header class="post-header">
          <h1 class="post-title">群晖系统提示硬盘损毁后提取硬盘数据</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2019-10-22 19:56:47 CST">
                22 Oct 2019
              </time>
              
            </div>
            <div class="col-xs-6">
              
              <div class="post-author">
                <a target="_blank" href="https://blog.pp.wtf/">@Butou Ma</a>
              </div>
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <p>群晖系统在安装新硬盘时需要进行硬盘的初始化，支持 ext4 或者 btrfs 两种文件系统。（我用的 brtfs）</p>
<p>群晖在检测到硬盘健康状况不太好时，容易提示硬盘损毁，此时在群晖系统内无法读写硬盘内容了。一般重新格式化或者修复下坏道就能继续正常用。</p>
<p>此时如果想要先取出其中的文件只能用其他系统。这两种格式都不能直接在 Mac 系统或者 windows 系统里正常读取。</p>
<p>不过可以用 Linux 系统读取。</p>
<p>以 Ubuntu 为例：</p>
<p>使用虚拟机直接装一个 Ubuntu。或者制作 u 盘启动盘，进入 <em>LiveCD</em> 模式启动电脑。</p>
<p>推荐使用虚拟机</p>
<p>我用的 Mac 上的 Parallels，VMware 当然也行。</p>
<p>进入系统后打开终端并以 root 身份（sudo -i）执行以下操作：</p>
<ul>
<li><code>apt-get update</code></li>
<li><code>apt-get install mdadm lvm2 btrfs-prog</code></li>
<li><code>mdadm -Asf &amp;&amp; vgchange -ay</code></li>
</ul>
<p>然后在文件管理器内就能看到对应的盘，文件数量少的话，直接手动选择复制就行。</p>
<blockquote>
<p><strong>以上步骤随手一谷歌就能在网上找到，以下才是重点。</strong></p>
</blockquote>
<p>在文件浏览器里可以直接批量复制，刚开始我是 smb 协议链接到 nas 去，进行远程复制。</p>
<p>然而会遇到 @开头的文件夹，此时会提示是否跳过，这种文件夹很多，一直点很烦，不点就会卡在那。而且测试后发现，smb 协议速度一般。</p>
<p><strong>所以我直接先用 Mac 的 Finder 用 afp 协议链接到 nas，在 Ubuntu 终端内用 rsync 复制的，直接排除掉 @开头文件夹，速度也快很多。</strong></p>
<ul>
<li>
<p>命令大概如下，排除掉特殊文件夹。并远程连接到 Mac 挂载好的 nas。</p>
</li>
<li>
<p>其中第一个 xxx 代表你要复制的文件夹，/Volumes/nas/xxx 是 nas 内的目标文件夹</p>
</li>
<li>
<p><a href="mailto:mabutou@192.168.1.100">mabutou@192.168.1.100</a> 代表 Mac 的局域网 ssh 用户名和地址（需要提前开启 ssh 功能，系统设置里就能直接打开）</p>
</li>
</ul>
<pre><code>rsync -ruv --progress --exclude='@eaDir' xxx mabutou@192.168.1.100:/Volumes/nas/xxx
</code></pre><p>然后坐等复制完成就行。</p>

        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
          </div>
        </div>
        
          <div class="row">
            <div class="col-xs-12">
              
            </div>
          </div>

          


          
          
          <div style="height: 50px;"></div>
          
          <div class="post-comments">
            <div id="disqus_thread"></div>
<script>
  window.addEventListener("load", () => {
    (function() {
      
      var d = document,
        s = d.createElement("script");
      s.src = "https://mabutou.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  });
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>

          </div>
          
        

        

<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>


      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

  

</body>

</html>